<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Smart_git (git.Smart_git)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../index.html">git</a> &#x00BB; Smart_git</nav><h1>Module <code>Smart_git</code></h1></header><div><div class="spec include"><div class="doc"><div class="spec module-type" id="module-type-APPEND"><a href="#module-type-APPEND" class="anchor"></a><code><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-APPEND/index.html">APPEND</a> = <a href="../Smart_git__/Smart_git_intf/index.html#module-type-APPEND">Smart_git__.Smart_git_intf.APPEND</a></code></div><div class="spec module-type" id="module-type-UID"><a href="#module-type-UID" class="anchor"></a><code><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-UID/index.html">UID</a> = <a href="../Smart_git__/Smart_git_intf/index.html#module-type-UID">Smart_git__.Smart_git_intf.UID</a></code></div><div class="spec module-type" id="module-type-HTTP"><a href="#module-type-HTTP" class="anchor"></a><code><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-HTTP/index.html">HTTP</a> = <a href="../Smart_git__/Smart_git_intf/index.html#module-type-HTTP">Smart_git__.Smart_git_intf.HTTP</a></code></div><div class="spec module" id="module-Endpoint"><a href="#module-Endpoint" class="anchor"></a><code><span class="keyword">module</span> <a href="Endpoint/index.html">Endpoint</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><section><header><h4 id="mimic-values."><a href="#mimic-values." class="anchor"></a>Mimic values.</h4><p>When the user use an <code>Endpoint.t</code> to <code>fetch</code> or <code>push</code>, we fill the given Mimic's <code>ctx</code> with some available informations such as:</p><ul><li>if we want to <code>fetch</code> (<code>`Rd</code>) or <code>push</code> (<code>`Wr</code>)</li><li>the scheme/protocol that the user would like to use (<code>git://</code>, SSH or HTTP - with or without TLS)</li><li>the path of the git repository</li><li>the host (an IP adress or a domain name)</li><li>the SSH user iff the user would like to use SSH</li><li>the port that the user would like to use</li></ul><p>From this informations, the <b>end</b>-user can process them through the Mimic API (with <span class="xref-unresolved" title="unresolved reference to &quot;Mimic.fold&quot;"><code>Mimic</code>.fold</span>) and describe how to create needed values to start <i>a</i> protocol from them.</p><p>For example, if the user wants to use <code>mirage-tcpip</code> which needs an IP address and a port, he is able to re-use/map/fold <a href="index.html#val-git_host"><code>git_host</code></a> and <a href="index.html#val-git_port"><code>git_port</code></a> to craft what <code>mirage-tcpip</code> really needs.</p><p>Of course, such job is definitely outside the scope of <code>ocaml-git</code> and permits to us to be free about protocol implementations. An example of the plumbing needed is able with <code>git-mirage</code> which re-use these values to be able to start a <code>mirage-tcpip</code> connection, a <code>awa-ssh</code> connection of a <code>cohttp</code> (with or without <code>ocaml-tls</code>) connection.</p></header><dl><dt class="spec value" id="val-git_capabilities"><a href="#val-git_capabilities" class="anchor"></a><code><span class="keyword">val</span> git_capabilities : <span><span>[ `Rd <span>| `Wr</span> ]</span> Mimic.value</span></code></dt><dt class="spec value" id="val-git_scheme"><a href="#val-git_scheme" class="anchor"></a><code><span class="keyword">val</span> git_scheme : <span><span>[ `Git <span>| `SSH</span> <span>| `HTTP</span> <span>| `HTTPS</span> <span><span>| `Scheme</span> of string</span> ]</span> Mimic.value</span></code></dt><dt class="spec value" id="val-git_path"><a href="#val-git_path" class="anchor"></a><code><span class="keyword">val</span> git_path : <span>string Mimic.value</span></code></dt><dt class="spec value" id="val-git_host"><a href="#val-git_host" class="anchor"></a><code><span class="keyword">val</span> git_host : <span><span>[ <span>`Addr of Ipaddr.t</span> <span><span>| `Domain</span> of <span><span>[ `host ]</span> Domain_name.t</span></span> <span><span>| `Name</span> of string</span> ]</span> Mimic.value</span></code></dt><dt class="spec value" id="val-git_ssh_user"><a href="#val-git_ssh_user" class="anchor"></a><code><span class="keyword">val</span> git_ssh_user : <span>string Mimic.value</span></code></dt><dt class="spec value" id="val-git_port"><a href="#val-git_port" class="anchor"></a><code><span class="keyword">val</span> git_port : <span>int Mimic.value</span></code></dt></dl><div class="spec module" id="module-Make"><a href="#module-Make" class="anchor"></a><code><span class="keyword">module</span> <a href="Make/index.html">Make</a> : <span class="keyword">functor</span> (<a href="Make/argument-1-Scheduler/index.html">Scheduler</a> : <a href="../Sigs/index.html#module-type-SCHED">Sigs.SCHED</a> <span class="keyword">with</span> <span class="keyword">type</span> <span>+'a <a href="Make/index.html#type-s">s</a></span> = <span><span class="type-var">'a</span> Lwt.t</span>) <span>&#45;&gt;</span> <span class="keyword">functor</span> (<a href="Make/argument-2-Pack/index.html">Pack</a> : <a href="index.html#module-type-APPEND">APPEND</a> <span class="keyword">with</span> <span class="keyword">type</span> <span>+'a <a href="Make/index.html#type-fiber">fiber</a></span> = <span><span class="type-var">'a</span> Lwt.t</span>) <span>&#45;&gt;</span> <span class="keyword">functor</span> (<a href="Make/argument-3-Index/index.html">Index</a> : <a href="index.html#module-type-APPEND">APPEND</a> <span class="keyword">with</span> <span class="keyword">type</span> <span>+'a <a href="Make/index.html#type-fiber">fiber</a></span> = <span><span class="type-var">'a</span> Lwt.t</span>) <span>&#45;&gt;</span> <span class="keyword">functor</span> (<a href="Make/argument-4-HTTP/index.html">HTTP</a> : <a href="index.html#module-type-HTTP">HTTP</a>) <span>&#45;&gt;</span> <span class="keyword">functor</span> (<a href="Make/argument-5-Uid/index.html">Uid</a> : <a href="index.html#module-type-UID">UID</a>) <span>&#45;&gt;</span> <span class="keyword">functor</span> (<a href="Make/argument-6-Ref/index.html">Ref</a> : <a href="../Sigs/index.html#module-type-REF">Sigs.REF</a>) <span>&#45;&gt;</span> <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div></section></div></div></div></div></body></html>